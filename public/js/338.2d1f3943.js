"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[338],{9679:function(e,t,a){a.d(t,{OI:function(){return i},Se:function(){return r},nv:function(){return o}});var s=a(3396),n=a(65);const r=()=>{const e=(0,n.oR)();return Object.fromEntries(Object.keys(e.getters).map((t=>[t,(0,s.Fl)((()=>e.getters[t]))])))},i=()=>{const e=(0,n.oR)();return Object.fromEntries(Object.keys(e._mutations).map((t=>[t,a=>e.commit(t,a)])))},o=()=>{const e=(0,n.oR)();return Object.fromEntries(Object.keys(e._actions).map((t=>[t,a=>e.dispatch(t,a)])))}},5428:function(e,t,a){a.d(t,{Rt:function(){return $},pQ:function(){return V},uI:function(){return Q},J7:function(){return X},L:function(){return J},nx:function(){return z},gk:function(){return H},BM:function(){return ee},t:function(){return K},WG:function(){return F}});a(1703);var s=a(7292),n=a(1597);const r=async e=>{const t=anime.timeline({targets:[...e],easing:"easeInSine"});t.add({scale:1.3,duration:700,complete:()=>{s.Z.explode.play(),e.forEach((e=>{e.removeAttribute("class"),e.classList.add("coin","bomb")}))}}),t.add({duration:700,complete:()=>{e.forEach((e=>{e.classList.add("invisible"),e.removeAttribute("style")}))}}),await t.finished},i=async e=>{const t=document.querySelector(".tile-container").getBoundingClientRect().height;await Promise.all(e.map((async e=>{const a=e.dataset.down,s=anime.timeline({duration:500,direction:"normal",easing:"easeInSine"});s.add({targets:e,endDelay:200,translateY:t*a}),await s.finished})))},o=async e=>{const t=anime.timeline({targets:[...e],direction:"normal",easing:"linear"});t.add({scale:0,delay:180,duration:0}),t.add({scale:1,duration:200,begin:()=>e.forEach((e=>e.classList.remove("invisible")))}),await t.finished},c=async e=>{const t=anime.timeline({targets:[...e],direction:"normal",easing:"linear"});t.add({rotate:"+=1turn",scale:0,duration:700,delay:300,complete:()=>{e.forEach((e=>{e.classList.add("invisible"),e.removeAttribute("style")}))}}),await t.finished},l=async e=>{e.source.square.parentElement.classList.remove("selected");const t=document.querySelector(".coin").parentElement.getBoundingClientRect().width,a=document.querySelector(".coin").parentElement.getBoundingClientRect().height;e.dest.id===e.source.id-8?await d(a,e):e.dest.id===e.source.id-1?await m(t,e):e.dest.id===e.source.id+1?await g(t,e):e.dest.id===e.source.id+8&&await u(a,e)},d=async(e,t)=>{const a=anime.timeline({duration:500,easing:"easeInSine",direction:t.alternate?"alternate":"normal"});a.add({translateY:-e,targets:t.source.square}),a.add({translateY:e,targets:t.dest.square},0),await a.finished},u=async(e,t)=>{const a=anime.timeline({duration:500,easing:"easeInSine",direction:t.alternate?"alternate":"normal"});a.add({translateY:e,targets:t.source.square}),a.add({translateY:-e,targets:t.dest.square},0),await a.finished},m=async(e,t)=>{const a=anime.timeline({duration:500,easing:"easeInSine",direction:t.alternate?"alternate":"normal"});a.add({translateX:-e,targets:t.source.square}),a.add({translateX:e,targets:t.dest.square},0),await a.finished},g=async(e,t)=>{const a=anime.timeline({duration:500,easing:"easeInSine",direction:t.alternate?"alternate":"normal"});a.add({translateX:e,targets:t.source.square}),a.add({translateX:-e,targets:t.dest.square},0),await a.finished},p={swap:l,drop:i,growAndExplode:r,grow:o,shrinkAndRotate:c};var h=p;let f,y=!1;const v={alternate:!0,dest:{square:null,id:null},source:{square:null,id:null}},b=e=>{s.Z.badMove.play(),e.source.square.parentElement.classList.remove("selected"),e.source.square=e.dest.square,e.source.square.parentElement.classList.add("selected"),e.source.id=e.dest.id,e.dest.id=null,e.dest.square=null},w=e=>{const t=e.source.square.dataset.amount;e.source.square.dataset.amount=e.dest.square.dataset.amount,e.dest.square.dataset.amount=t},S=e=>{const t=e.dest.square,a=e.source.square,s=t.classList[1],n=a.classList[1];a.removeAttribute("style"),a.parentElement.removeAttribute("style"),a.parentElement.classList.remove("selected"),a.classList.replace(n,s),t.removeAttribute("style"),t.parentElement.removeAttribute("style"),t.classList.replace(s,n)},C=e=>{const t=parseInt(e.getAttribute("id"));null!==v.source.square&&null===v.dest.square&&v.source.square!==e&&(v.dest.id=t,v.dest.square=e,E())},E=async()=>{n.Z.commit("madeFirstMove",!0);let e=[v.source.id-1,v.source.id+1,v.source.id+8,v.source.id-8],t=e.includes(v.dest.id);t?R():b(v)},Z=async()=>{if(!n.Z.state.crush.pause)while(j())await D()},x=()=>{const e=n.Z.getters.getCrushState("currentLvL"),t=n.Z.getters.getCrushState("levels");return t[e-1]},_=e=>{let t=0;const a=x(),s=n.Z.getters.getCrushState("grid");e.forEach((e=>t+=parseInt(s[e].dataset.amount))),t===a.target&&L(e,s)},L=(e,t)=>{e.forEach((e=>{t[e].dataset.amount=0,t[e].classList.add("marked")})),n.Z.commit("increaseCombo"),y=!0},k=(e,t=!1,a=[])=>{const s=document.getElementsByClassName(e);return Array.from(s).forEach((e=>a.push(e))),t&&a.reverse(),a},q=e=>{e.forEach((e=>{e.removeAttribute("class"),e.classList.add(...I(e.dataset.amount))}))},I=e=>{let t="";switch(parseInt(e)){case 5:t=["coin","five"];break;case 10:t=["coin","ten"];break;case 20:t=["coin","twenty"];break;case 50:t=["coin","fifty"];break;case 100:t=["coin","one-hundred"];break;case 500:t=["coin","five-hundred"];break;default:t=["coin","bg-dark"];break}return t},A=e=>{e.source.square=e.source.id=null,e.dest.square=e.dest.id=null,e.alternate=!0},U=e=>{e.forEach((e=>{e.removeAttribute("style"),e.removeAttribute("data-down"),B()}))},B=()=>{const e=document.getElementsByClassName("tile-container");Array.from(e).forEach((e=>e.classList.add("hvr-grow")))},j=()=>{y=!1;for(let e=0;e<62;e++){const t=[6,7,14,15,22,23,30,31,38,39,46,47,54,55],a=[5,6,7,13,14,15,21,22,23,29,30,31,37,38,39,45,46,47,53,54,55,61,62,63],s=[4,5,6,7,12,13,14,15,20,21,22,23,28,29,30,31,36,37,38,39,44,45,46,47,52,53,54,55,60,61,62,63];e<48&&_([e,e+8,e+16]),e<40&&_([e,e+8,e+16,e+24]),e<32&&_([e,e+8,e+16,e+24,e+32]),t.includes(e)||(_([e,e+1,e+2]),a.includes(e)||(_([e,e+1,e+2,e+3]),s.includes(e)||_([e,e+1,e+2,e+3,e+4])))}return y},D=async()=>{const e=n.Z.getters.getCrushState("grid"),t=k("marked",!0),[a,r]=G(t,e);await h.growAndExplode(t),await h.drop(r),s.Z.drop.play(),O(a,e);const i=k("update",!1),o=k("replace",!1);q(i),J(o,!0),r.forEach((e=>e.removeAttribute("style"))),await h.grow(o),s.Z.wellDone.play(),n.Z.commit("increaseGameTime"),n.Z.commit("increasePoints"),U(a)},G=(e,t)=>{let a=[],s=[];return e.forEach((e=>{let n=parseInt(e.getAttribute("id"));while(n>=0)s.push(t[n]),parseInt(t[n].dataset.amount)>0&&a.push(t[n]),n-=8})),s=[...new Set(s)],a=[...new Set(a)],P(a,t),[s,a]},P=(e,t)=>{e.forEach((e=>{let a=0,s=parseInt(e.getAttribute("id"));while(s<64){const e=parseInt(t[s].dataset.amount);0===e&&a++,s+=8}e.setAttribute("data-down",a)}))},O=(e,t)=>{const a=[0,1,2,3,4,5,6,7];e.forEach((e=>{const s=parseInt(e.getAttribute("id"));let n=s;while(n>=0){if(n-=8,a.includes(s)||n<0){e.classList.add("replace");break}if(parseInt(t[n].dataset.amount)>0){e.dataset.amount=t[n].dataset.amount,t[n].dataset.amount=0,e.classList.add("update");break}}}))},R=async()=>{w(v),j()&&(v.alternate=!1),await h.swap(v),s.Z.swap.play(),v.alternate?w(v):(S(v),await D()),A(v);while(j())await D()},Y=()=>new Promise(((e,t)=>{setTimeout((()=>{s.Z.getReady.play(),s.Z.getReady.on("end",(()=>{s.Z.gameStart.play(),s.Z.gameStart.on("end",(()=>e()))}))}),1e3)})),T=async()=>{V();const e=[],t=document.getElementsByClassName("tile-container");Array.from(t).forEach((t=>e.push(t.firstElementChild))),n.Z.commit("pushCurrentScore"),n.Z.commit("startGame",!1),n.Z.commit("updateUser",{prop:"scores",value:n.Z.getters.getCrushState("currentScore")}),s.Z.timeUp.play(),s.Z.timeUp.on("end",(function(){s.Z.gameOver.play()})),await h.shrinkAndRotate(e),n.Z.commit("toggleModal","tryAgain")},M=async()=>{if(V(),n.Z.commit("pushCurrentScore"),n.Z.commit("startGame",!1),n.Z.state.crush.currentLvL==n.Z.state.crush.maxLvl)return s.Z.gameCompleted.play(),void n.Z.commit("toggleModal","Completed");const e=[],t=document.getElementsByClassName("tile-container");Array.from(t).forEach((t=>e.push(t.firstElementChild))),s.Z.lvlComplete.play(),await h.shrinkAndRotate(e),n.Z.commit("toggleModal","Continue")},N=()=>{!f&&n.Z.getters.getCrushState("playing")&&(f=setInterval(W,1500))},W=async()=>{if(!n.Z.getters.getPauseStatus&&n.Z.getters.getCrushState("playing")){const e=document.getElementById("progress-bar-container").firstElementChild;let t=parseInt(e.style.width);t-=n.Z.getters.getCrushObjState({obj:"clock",prop:"minus"}),t<20&&t>0?(s.Z.warning.play(),e.classList.replace("bg-warning","bg-danger"),e.parentElement.classList.add("pulse")):(e.classList.replace("bg-danger","bg-warning"),e.parentElement.classList.remove("pulse")),n.Z.commit("increasePlayTime"),0==t&&T(),e.style.width=`${t}%`}},z=e=>{const t=e.target.closest(".coin");null===v.source.square?(s.Z.select.play(),v.source.square=t,t.parentElement.classList.add("selected"),v.source.id=parseInt(t.getAttribute("id"))):C(t)},H=(e,t)=>{if(null===v.source.square)v.source.square=t.srcElement.closest(".coin"),v.source.id=parseInt(v.source.square.getAttribute("id")),v.source.square.parentElement.classList.add("selected");else if(null!==v.dest.square)return;"top"===e?C(document.getElementById(v.source.id-8)):"left"===e?C(document.getElementById(v.source.id-1)):"right"===e?C(document.getElementById(v.source.id+1)):"bottom"===e&&C(document.getElementById(v.source.id+8))},J=(e,t=!1)=>{const a=n.Z.getters.getCurrency;e.forEach((s=>{try{if(e.length>64)throw new Error;s.dataset.amount=0;const n=Math.floor(Math.random()*a.length);s.removeAttribute("class"),s.setAttribute("data-amount",a[n].amount),s.classList.add("coin",a[n].css),t&&s.classList.add("invisible")}catch{s.parentElement.classList.add("bg-white")}}))},Q=e=>{const t=document.getElementsByClassName(e);Array.from(t).forEach((e=>{e.firstElementChild.setAttribute("data-amount",0),n.Z.commit("setGrid",e.firstElementChild)}))},X=async()=>{J(n.Z.getters.getCrushState("grid")),await h.grow(n.Z.getters.getCrushState("grid")),K(n.Z.getters.getPauseStatus)},F=async()=>{const e=document.getElementById("pauseBtn");n.Z.getters.getPauseStatus?e.innerText="resume":(s.Z.welcomeBack.play(),e.innerText="pause");const t=document.getElementsByClassName("tile-container");Array.from(t).forEach((e=>{e.firstElementChild.removeAttribute("class"),n.Z.getters.getPauseStatus?e.firstElementChild.classList.add("coin","penny"):e.firstElementChild.classList.add(...I(e.firstElementChild.dataset.amount))}))},K=async e=>{e||n.Z.getters.getCrushState("playing")||(n.Z.commit("startGame",!0),await Y(),Z(),N())},$=async()=>{const e=x(),t=n.Z.getters.getCrushState("currentScore"),a=n.Z.state.user.highScore;t==e.goal&&M(),t>a&&n.Z.commit("updateUser",{prop:"highScore",value:t})},V=()=>{clearInterval(f),f=null,n.Z.commit("startGame",!1)},ee=async()=>{V(),n.Z.commit("startGame",!1),n.Z.commit("pushCurrentScore"),n.Z.commit("pauseGame"),n.Z.commit("madeFirstMove",!1),X();const e=document.getElementById("progress-bar-container").firstElementChild;document.getElementById("pauseBtn").innerText="pause",e.style.width="100%",n.Z.state.crush.currentScore=0}},6166:function(e,t,a){a.r(t),a.d(t,{default:function(){return fe}});var s=a(3396),n=a(9679),r=a(4870),i=a(5428);const o={class:"d-flex justify-content-center w-100 h-75"},c={id:"myGrid",class:"d-flex flex-wrap justify-content-center justify-content-lg-start w-100 h-100 rounded rounded-6 transparent-dark"},l=["id"],d=(0,s._)("div",{class:"w-100 h-100"},null,-1),u=[d];var m={__name:"grid",setup(e){const{resetGrid:t}=(0,n.OI)(),{getCrushState:a,getPauseStatus:d,getCurrentScore:m,getCrushCurrentLvL:g}=(0,n.Se)();return(0,s.bv)((()=>{(0,i.uI)("tile-container"),(0,i.L)(a.value("grid"))})),(0,s.Jd)((()=>{(0,i.pQ)(),t()})),(0,s.YP)((()=>m),(()=>(0,i.Rt)()),{deep:!0}),(0,s.YP)((()=>g),(()=>(0,i.J7)()),{deep:!0}),(0,s.YP)((()=>d),(()=>(0,i.t)(d.value)),{deep:!0}),(e,t)=>{const n=(0,s.Q2)("touch");return(0,s.wg)(),(0,s.iD)("div",o,[(0,s._)("div",c,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,r.SU)(a)("gridSize")*(0,r.SU)(a)("gridSize"),((e,a)=>((0,s.wg)(),(0,s.iD)("div",{key:a,class:"tile-container d-flex justify-content-center align-items-center"},[(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",{id:a,onClick:t[0]||(t[0]=(...e)=>(0,r.SU)(i.nx)&&(0,r.SU)(i.nx)(...e))},u,8,l)),[[n,(0,r.SU)(i.gk),"swipe"]])])))),128))])])}}};const g=m;var p=g;const h=e=>((0,s.dD)("data-v-2947d1dd"),e=e(),(0,s.Cn)(),e),f={class:"col-12 col-lg justify-content-center justify-content-lg-end w-100 h-100"},y=h((()=>(0,s._)("div",{id:"progress-bar-container",class:"progress mx-2 mx-sm-auto my-3"},[(0,s._)("div",{class:"progress-bar progress-bar-striped progress-bar-animated bg-warning",role:"progressbar",style:{width:"100%"},"aria-valuemin":"0","aria-valuemax":"100"})],-1))),v={class:"d-flex align-items-center justify-content-center pt-3"},b=["disabled"],w=["disabled"],S=["disabled"];var C={__name:"game-layout",setup(e){const{toggleModal:t,pauseGame:a}=(0,n.OI)(),{getPauseStatus:o}=(0,n.Se)(),c=()=>{const e=document.getElementsByClassName("hint");anime({targets:e,scale:[{value:1},{value:1.3},{value:1,delay:250}],rotateY:{value:"+=180",delay:200},easing:"easeInOutSine",duration:400})},l=()=>{c(),setTimeout((()=>c()),1e4)};return(e,n)=>((0,s.wg)(),(0,s.iD)("div",f,[(0,s.Wm)(p),y,(0,s._)("div",v,[(0,s._)("button",{disabled:(0,r.SU)(o),onClick:n[0]||(n[0]=e=>[(0,r.SU)(t)("restart"),(0,r.SU)(a)(),(0,r.SU)(i.WG)()]),type:"button",class:"btn btn-danger mx-1 py-0 px-md-3 rounded-1 btn-highlight-none"},"Restart",8,b),(0,s._)("button",{onClick:n[1]||(n[1]=e=>[(0,r.SU)(a)(),(0,r.SU)(i.WG)()]),id:"pauseBtn",type:"button",class:"btn btn-warning text-white mx-1 py-0 px-md-3 btn-highlight-none"},"Pause"),(0,s._)("button",{disabled:(0,r.SU)(o),onClick:l,type:"button",class:"d-none d-lg-block btn btn-success mx-1 py-0 px-md-3 btn-highlight-none"},"Hints",8,w),(0,s._)("button",{disabled:(0,r.SU)(o),onClick:n[2]||(n[2]=e=>[(0,r.SU)(t)("scores"),(0,r.SU)(a)(),(0,r.SU)(i.WG)()]),type:"button",class:"btn btn-light mx-1 py-0 px-md-3 btn-highlight-none"},"Scores",8,S)])]))}},E=a(89);const Z=(0,E.Z)(C,[["__scopeId","data-v-2947d1dd"]]);var x=Z,_=a.p+"img/icon-sm-white.b57fd7bc.png",L=a.p+"img/ajax-loader-white.e3f522a3.gif";const k=e=>((0,s.dD)("data-v-3b33e664"),e=e(),(0,s.Cn)(),e),q={class:"d-flex align-items-center justify-content-center h-100 bg-dark"},I=k((()=>(0,s._)("div",{class:"d-flex flex-column justify-content-center align-items-center h-75 pb-5 pb-sm-0"},[(0,s._)("img",{src:_,alt:"logo"}),(0,s._)("h1",{class:"text-white text-center mt-4 fs-4"},"Loading"),(0,s._)("img",{src:L,class:"my-4",alt:"loader"})],-1))),A=[I];function U(e,t){return(0,s.wg)(),(0,s.iD)("div",q,A)}const B={},j=(0,E.Z)(B,[["render",U],["__scopeId","data-v-3b33e664"]]);var D=j,G=a(7139);const P=e=>((0,s.dD)("data-v-e3ec4d8a"),e=e(),(0,s.Cn)(),e),O={class:"d-none d-lg-block d-flex col-0 col-lg-3 me-3 me-xl-4 h-80 d-flex flex-column align-items-center"},R={class:"d-flex justify-content-end hint-container h-100 w-100"},Y={class:"h-75 hint"},T=P((()=>(0,s._)("div",{class:"front bg-dark"},[(0,s._)("div",{class:"h-100 w-100 text-white"})],-1))),M={class:"back"},N={class:"d-flex flex-column transparent-dark w-100 h-100"},W=P((()=>(0,s._)("h3",{class:"text-white fs-5 fw-bold text-center my-3"},"Hints",-1))),z={id:"Combinations",class:"d-flex flex-column h-100 overflow-auto"},H=P((()=>(0,s._)("div",{class:"tile"},null,-1))),J=[H];var Q={__name:"hints-card",setup(e){const{getHints:t,getCrushCurrentLvL:a}=(0,n.Se)();return(e,n)=>((0,s.wg)(),(0,s.iD)("div",O,[(0,s._)("div",R,[(0,s._)("div",Y,[T,(0,s._)("div",M,[(0,s._)("div",N,[W,(0,s._)("div",z,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,r.SU)(t)((0,r.SU)(a)-1).hints,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{key:t,class:"d-flex align-items-center flex-grow-1 px-2"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{key:t,class:"d-flex coin-container"},[(0,s._)("div",{class:(0,G.C_)(["coin hints",e])},J,2)])))),128))])))),128))])])])])])]))}};const X=(0,E.Z)(Q,[["__scopeId","data-v-e3ec4d8a"]]);var F=X;const K={class:"d-flex justify-content-between align-items-center bg-white shadow-sm p-2 p-md-3 my-3 w-75 w-lg-60"},$={class:"mb-0"},V=(0,s.Uk)("Level: "),ee={class:"text-success fw-bold"},te={class:"mb-0 text-muted"},ae={class:"text-success"},se={class:"mb-0"},ne=(0,s.Uk)("Target: "),re={class:"text-danger fw-bold"};var ie={__name:"game-header",setup(e){const{getCrushState:t,getCrushLvlState:a,getCrushCurrentLvL:i}=(0,n.Se)(),o=(0,r.qj)({goal:null,target:null});(0,s.bv)((()=>c())),(0,s.YP)((()=>i),(()=>c()),{deep:!0});const c=()=>{const e=t.value("currentLvL");o.goal=a.value(e-1).goal,o.target=a.value(e-1).target};return(e,a)=>((0,s.wg)(),(0,s.iD)("div",K,[(0,s._)("p",$,[V,(0,s._)("span",ee,(0,G.zw)((0,r.SU)(t)("currentLvL")),1)]),(0,s._)("p",te,[(0,s.Uk)((0,G.zw)((0,r.SU)(t)("currentScore"))+" / ",1),(0,s._)("span",ae,(0,G.zw)(o.goal),1)]),(0,s._)("p",se,[ne,(0,s._)("span",re,(0,G.zw)(o.target),1)])]))}};const oe=ie;var ce=oe;const le=e=>((0,s.dD)("data-v-2c627e7c"),e=e(),(0,s.Cn)(),e),de={class:"h-100"},ue={key:1,class:"game-container d-flex flex-column align-items-center flex-grow-1 mb-2 h-100"},me={class:"row align-self-end d-flex justify-content-center w-100 h-100 px-0 mx-1"},ge=le((()=>(0,s._)("div",{class:"d-none d-lg-block d-flex col-0 col-lg-2"},null,-1)));var pe={__name:"main-layout",setup(e){const{startGame:t,toggleModal:a,pushCurrentScore:i,toggleSideNav:o}=(0,n.OI)(),{saveScore:c}=(0,n.nv)(),l=(0,r.qj)({loading:!0,loadTime:4500});(0,s.bv)((async()=>{d("Quit Game"),l.loading=await u(l.loadTime),a("rules")})),(0,s.Jd)((async()=>{t(!1),i(),await c(),d("logout"),o(!0)}));const d=e=>{const t=document.getElementById("logOutBtn");t.innerText=e},u=e=>new Promise(((t,a)=>setTimeout((()=>t(!l.loading)),e)));return(e,t)=>((0,s.wg)(),(0,s.iD)("div",de,[l.loading?((0,s.wg)(),(0,s.j4)(D,{key:0})):((0,s.wg)(),(0,s.iD)("div",ue,[(0,s.Wm)(ce),(0,s._)("div",me,[ge,(0,s.Wm)(x),(0,s.Wm)(F)])]))]))}};const he=(0,E.Z)(pe,[["__scopeId","data-v-2c627e7c"]]);var fe=he}}]);
//# sourceMappingURL=338.2d1f3943.js.map